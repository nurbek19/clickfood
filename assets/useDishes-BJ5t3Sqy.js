import{r as s}from"./index-DTQvtKI0.js";import{a as C,d}from"./index-D7eaQO8v.js";const D=async r=>(await C.get("/foods",{params:{partner_id:r}})).data;function w({partnerId:r}){const[a,c]=s.useState([]),[i,g]=s.useState([]),[h,u]=s.useState([]),[m,l]=s.useState(!1),[p,f]=s.useState(null),o=s.useCallback(async()=>{if(r){l(!0),f(null);try{const e=await D(r);c(e),g(e);const t=Array.from(new Set(e.map(n=>n.category).filter(Boolean)));u(t)}catch(e){f(e)}finally{l(!1)}}},[r]);s.useEffect(()=>{o()},[o]);const y=s.useMemo(()=>a.some(e=>{const t=i.find(n=>n._id===e._id);return!t||!d(t,e)}),[a,i]),S=s.useCallback(()=>a.filter(e=>{const t=i.find(n=>n._id===e._id);return!t||!d(t,e)}),[a,i]);return{dishes:a,setDishes:c,originalDishes:i,categories:h,setCategories:u,isLoading:m,error:p,isChanged:y,getChangedDishes:S,refresh:o}}export{w as u};
