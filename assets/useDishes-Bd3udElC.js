import{r as t}from"./index-BhqLDQWW.js";import{h as S,d}from"./index-DeSp45zg.js";const D=async r=>(await S.get("/foods",{params:{partner_id:r}})).data;function w({partnerId:r}){const[a,c]=t.useState([]),[n,g]=t.useState([]),[h,u]=t.useState([]),[m,l]=t.useState(!1),[p,f]=t.useState(null),o=t.useCallback(async()=>{if(r){l(!0),f(null);try{const e=await D(r);c(e),g(e);const s=Array.from(new Set(e.map(i=>i.category).filter(Boolean)));u(s)}catch(e){f(e)}finally{l(!1)}}},[r]);t.useEffect(()=>{o()},[o]);const y=t.useMemo(()=>a.some(e=>{const s=n.find(i=>i._id===e._id);return!s||!d(s,e)}),[a,n]),C=t.useCallback(()=>a.filter(e=>{const s=n.find(i=>i._id===e._id);return!s||!d(s,e)}),[a,n]);return{dishes:a,setDishes:c,originalDishes:n,categories:h,setCategories:u,isLoading:m,error:p,isChanged:y,getChangedDishes:C,refresh:o}}export{w as u};
