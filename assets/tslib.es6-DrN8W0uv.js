import{r as c}from"./index-IXhmCcSM.js";import{h as b,d as g}from"./index-BVYls5xY.js";const w=async r=>(await b.get("/foods",{params:{partner_id:r}})).data;function v({partnerId:r}){const[e,n]=c.useState([]),[t,a]=c.useState([]),[s,u]=c.useState([]),[h,d]=c.useState(!1),[p,i]=c.useState(null),f=c.useCallback(async()=>{if(r){d(!0),i(null);try{const o=await w(r);n(o),a(o);const l=Array.from(new Set(o.map(y=>y.category).filter(Boolean)));u(l)}catch(o){i(o)}finally{d(!1)}}},[r]);c.useEffect(()=>{f()},[f]);const m=c.useMemo(()=>e.some(o=>{const l=t.find(y=>y._id===o._id);return!l||!g(l,o)}),[e,t]),O=c.useCallback(()=>e.filter(o=>{const l=t.find(y=>y._id===o._id);return!l||!g(l,o)}),[e,t]);return{dishes:e,setDishes:n,originalDishes:t,categories:s,setCategories:u,isLoading:h,error:p,isChanged:m,getChangedDishes:O,refresh:f}}var _=function(){return _=Object.assign||function(e){for(var n,t=1,a=arguments.length;t<a;t++){n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},_.apply(this,arguments)};function j(r,e){var n={};for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&e.indexOf(t)<0&&(n[t]=r[t]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,t=Object.getOwnPropertySymbols(r);a<t.length;a++)e.indexOf(t[a])<0&&Object.prototype.propertyIsEnumerable.call(r,t[a])&&(n[t[a]]=r[t[a]]);return n}function x(r,e,n,t){function a(s){return s instanceof n?s:new n(function(u){u(s)})}return new(n||(n=Promise))(function(s,u){function h(i){try{p(t.next(i))}catch(f){u(f)}}function d(i){try{p(t.throw(i))}catch(f){u(f)}}function p(i){i.done?s(i.value):a(i.value).then(h,d)}p((t=t.apply(r,e||[])).next())})}function C(r,e,n){if(n||arguments.length===2)for(var t=0,a=e.length,s;t<a;t++)(s||!(t in e))&&(s||(s=Array.prototype.slice.call(e,0,t)),s[t]=e[t]);return r.concat(s||Array.prototype.slice.call(e))}export{x as _,_ as a,j as b,C as c,v as u};
